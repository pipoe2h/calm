{"status":{},"contains_secrets":false,"product_version":"3.1.0","spec":{"description":"*[Cloud Bursting ](http:\/\/@@{LoadBalancer.address}@@)","resources":{"client_attrs":{"fbe5e5f3_deployment":{"y":395,"x":138.125},"169a62c7_deployment":{"y":421,"x":491.75},"652921f9_deployment":{"y":-14.5,"x":169}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"b5e1e3dc_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"script":"port=80\n\necho \"global\n  log 127.0.0.1 local0\n  log 127.0.0.1 local1 notice\n  maxconn 4096\n  quiet\n  user haproxy\n  group haproxy\ndefaults\n  log     global\n  mode    http\n  retries 3\n  timeout client 50s\n  timeout connect 5s\n  timeout server 50s\n  option dontlognull\n  option httplog\n  option redispatch\n  balance  roundrobin\n# Set up application listeners here.\nlisten stats 0.0.0.0:8080\n  mode http\n  log global\n  stats enable\n  stats hide-version\n  stats refresh 30s\n  stats show-node\n  stats uri \/stats\nlisten admin\n  bind 127.0.0.1:22002\n  mode http\n  stats uri \/\nfrontend http\n  option forwardfor\n  option httpclose\n  maxconn 2000\n  bind 0.0.0.0:80\n  default_backend servers-http\nbackend servers-http\" | sudo tee \/etc\/haproxy\/haproxy.cfg\n\nsudo sed -i 's\/server host-\/#server host-\/g' \/etc\/haproxy\/haproxy.cfg\n\nonprem_hosts=\"@@{ApacheAHV.address}@@\"\nazure_hosts=\"@@{ApacheAZURE.address}@@\"\n\nmerged_hosts=$onprem_hosts,$aws_hosts,$gcp_hosts,$azure_hosts\n\n#hosts=$(echo \"@@{ApacheAHV.address}@@\" | sed 's\/^,\/\/' | sed 's\/,$\/\/' | tr \",\" \"\\n\")\n\nhosts=$(echo $merged_hosts | sed 's\/^,\/\/' | sed 's\/,$\/\/' | tr \",\" \"\\n\")\n\nfor host in $hosts\ndo\n   echo \"  server host-${host} ${host}:${port} weight 1 maxconn 100 check\" | sudo tee -a \/etc\/haproxy\/haproxy.cfg\ndone\n\nsudo systemctl daemon-reload\nsudo systemctl enable haproxy","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"e1fa7669_runbook","main_task_local_reference":{"kind":"app_task","name":"b5e1e3dc_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"d5caffb8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a614b3b6_runbook","main_task_local_reference":{"kind":"app_task","name":"d5caffb8_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"016d2910_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"script":"sudo systemctl restart haproxy","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"ecdb71e8_runbook","main_task_local_reference":{"kind":"app_task","name":"016d2910_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"8f606f41_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"9ea15f42_runbook","main_task_local_reference":{"kind":"app_task","name":"8f606f41_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"227af9a9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"e7faf265_runbook","main_task_local_reference":{"kind":"app_task","name":"227af9a9_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[{"kind":"app_service","name":"Apache_AHV"},{"kind":"app_service","name":"Apache_AZ"}],"name":"LoadBalancer","port_list":[],"tier":"","variable_list":[{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","library_reference":"95a9cc33-7bfa-49d8-b02b-eada28744b93","name":"PLATFORM","value":"nutanix","label":"","attrs":{"type":"LOCAL"},"editables":{"value":false},"is_hidden":false,"options":{"type":"PREDEFINED","choices":["nutanix","xi","azure","aws","gcp","vmware","kubernetes"]}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AZ"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"3205e56b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Apache_AZ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"script":"sudo sed -i 's|DocumentRoot \"\/var\/www\/html\"|DocumentRoot \"\/var\/www\/html\/nutanix\"|' \/etc\/httpd\/conf\/httpd.conf\necho '<Directory \"\/var\/www\/html\/nutanix\">\n    Options Indexes FollowSymLinks\n    AllowOverride All\n    Require all granted\n<\/Directory>' | sudo tee \/etc\/httpd\/conf.modules.d\/nutanix.conf\n\necho \"<IfModule mod_dir.c>\n        DirectoryIndex index.php index.html index.cgi index.pl index.php index.xhtml index.htm\n<\/IfModule>\" | sudo tee \/etc\/httpd\/conf.modules.d\/dir.conf\n\nsudo mkdir -p \/var\/www\/html\/nutanix\ncd \/var\/www\/html\/nutanix\n\necho 'SetEnv CALM_PLATFORM \"@@{PLATFORM}@@\"\nSetEnv CALM_LB \"@@{LB_AHV.address}@@\"' | sudo tee .htaccess\nsudo wget https:\/\/raw.githubusercontent.com\/pipoe2h\/calm\/master\/demo\/webpage\/index.php \nsudo wget https:\/\/raw.githubusercontent.com\/pipoe2h\/calm\/master\/demo\/webpage\/nutanix_hybrid_cloud.png\nsudo wget https:\/\/raw.githubusercontent.com\/pipoe2h\/calm\/master\/demo\/webpage\/style.css\nsudo wget https:\/\/github.com\/pipoe2h\/calm\/raw\/master\/demo\/webpage\/nutanix_logo.png\n\nsudo systemctl enable httpd.service\nsudo systemctl restart httpd.service","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"00088ba8_runbook","main_task_local_reference":{"kind":"app_task","name":"3205e56b_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AZ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"18a2cb4d_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"946a7c7e_runbook","main_task_local_reference":{"kind":"app_task","name":"18a2cb4d_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AZ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7fa57dc9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"94a9825b_runbook","main_task_local_reference":{"kind":"app_task","name":"7fa57dc9_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AZ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"06f2d0cc_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"0fadc114_runbook","main_task_local_reference":{"kind":"app_task","name":"06f2d0cc_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AZ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"4d2086b9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"04f5fdc1_runbook","main_task_local_reference":{"kind":"app_task","name":"4d2086b9_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"Apache_AZ","port_list":[],"tier":"","variable_list":[{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","library_reference":"95a9cc33-7bfa-49d8-b02b-eada28744b93","name":"PLATFORM","value":"azure","label":"","attrs":{"type":"LOCAL"},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":["nutanix","xi","azure","aws","gcp","vmware","kubernetes"]}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AHV"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"c5b43f84_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Apache_AHV"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"script":"sudo sed -i 's|DocumentRoot \"\/var\/www\/html\"|DocumentRoot \"\/var\/www\/html\/nutanix\"|' \/etc\/httpd\/conf\/httpd.conf\necho '<Directory \"\/var\/www\/html\/nutanix\">\n    Options Indexes FollowSymLinks\n    AllowOverride All\n    Require all granted\n<\/Directory>' | sudo tee \/etc\/httpd\/conf.modules.d\/nutanix.conf\n\necho \"<IfModule mod_dir.c>\n        DirectoryIndex index.php index.html index.cgi index.pl index.php index.xhtml index.htm\n<\/IfModule>\" | sudo tee \/etc\/httpd\/conf.modules.d\/dir.conf\n\nsudo mkdir -p \/var\/www\/html\/nutanix\ncd \/var\/www\/html\/nutanix\n\necho 'SetEnv CALM_PLATFORM \"@@{PLATFORM}@@\"\nSetEnv CALM_LB \"@@{LB_AHV.address}@@\"' | sudo tee .htaccess\nsudo wget https:\/\/raw.githubusercontent.com\/pipoe2h\/calm\/master\/demo\/webpage\/index.php \nsudo wget https:\/\/raw.githubusercontent.com\/pipoe2h\/calm\/master\/demo\/webpage\/nutanix_hybrid_cloud.png\nsudo wget https:\/\/raw.githubusercontent.com\/pipoe2h\/calm\/master\/demo\/webpage\/style.css\nsudo wget https:\/\/github.com\/pipoe2h\/calm\/raw\/master\/demo\/webpage\/nutanix_logo.png\n\nsudo systemctl enable httpd.service\nsudo systemctl restart httpd.service","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"646d14b2_runbook","main_task_local_reference":{"kind":"app_task","name":"c5b43f84_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AHV"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3c1fbccb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"280d8c37_runbook","main_task_local_reference":{"kind":"app_task","name":"3c1fbccb_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AHV"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"24dae177_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"fd5a0acc_runbook","main_task_local_reference":{"kind":"app_task","name":"24dae177_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AHV"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"74eafdde_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"16474a4e_runbook","main_task_local_reference":{"kind":"app_task","name":"74eafdde_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Apache_AHV"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"c7e136bb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ec28df58_runbook","main_task_local_reference":{"kind":"app_task","name":"c7e136bb_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"Apache_AHV","port_list":[],"tier":"","variable_list":[{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","library_reference":"95a9cc33-7bfa-49d8-b02b-eada28744b93","name":"PLATFORM","value":"nutanix","label":"","attrs":{"type":"LOCAL"},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":["nutanix","xi","azure","aws","gcp","vmware","kubernetes"]}}],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"LB_AHV","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"Cred_OS"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{}}}},"os_type":"Linux","create_spec":{"name":"demo-lb-@@{calm_array_index}@@-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"92b02b9e-b316-4503-94fb-a90bf3fede8b"},"type":""}],"serial_port_list":[{"index":0,"type":"","is_connected":false}],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":1024,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nhostname: @@{name}@@\nusers:\n  - name: @@{Cred_OS.username}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: |\n    @@{Cred_OS.username}@@:@@{Cred_OS.secret}@@\n  expire: False\nssh_pwauth: True\nruncmd:\n  - yum -y install lvm2\n  - [eject]"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"4ad90864-dcc6-47d1-9dfb-9feede5927a5","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS_7_Cloud","uuid":"d3893b21-a962-439d-879d-2a07daf3b2e4"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ApacheAZURE"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"616f4f54_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"82d1f19b_runbook","main_task_local_reference":{"kind":"app_task","name":"616f4f54_dag"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"ApacheAZURE"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"77814d18_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"e02c04a5_runbook","main_task_local_reference":{"kind":"app_task","name":"77814d18_dag"},"variable_list":[]},"name":"post_action_delete"}],"type":"AZURE_VM","name":"ApacheAZURE","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.privateIPAddressList[0]}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"Cred_OS"}},"os_type":"Linux","create_spec":{"type":"PROVISION_AZURE_VM","name":"","resources":{"vm_name":"demo-azure-@@{calm_array_index}@@-@@{calm_time}@@","storage_profile":{"is_managed":true,"image_details":{"sku":"7_8","publisher":"OpenLogic","offer":"CentOS","source_image_id":"","version":"7.8.2020111300","source_image_type":"Marketplace","type":""},"type":"","os_disk_details":{"size_in_gb":-1,"name":"os-@@{calm_unique_hash}@@-@@{calm_array_index}@@-disk","storage_name":"","storage_type":"","caching_type":"ReadWrite","type":"","create_option":"FromImage","lun":-1},"data_disk_list":[]},"nw_profile":{"nic_list":[{"nsg_name":"","vnet_name":"","subnet_id":"\/subscriptions\/575bd7ed-618c-4a20-a50b-d4501433f5d2\/resourceGroups\/UK\/providers\/Microsoft.Network\/virtualNetworks\/calmvn\/subnets\/default","nsg_id":"\/subscriptions\/575bd7ed-618c-4a20-a50b-d4501433f5d2\/resourceGroups\/UK\/providers\/Microsoft.Network\/networkSecurityGroups\/calmnsg","private_ip_info":{"ip_allocation_method":"Dynamic","ip_address":"","type":""},"nic_name":"nic-@@{calm_unique_hash}@@-@@{calm_array_index}@@-0","subnet_name":"","vnet_id":"\/subscriptions\/575bd7ed-618c-4a20-a50b-d4501433f5d2\/resourceGroups\/UK\/providers\/Microsoft.Network\/virtualNetworks\/calmvn","type":"","public_ip_info":null}],"primary_nic":-1,"type":""},"resource_group":"UK","os_profile":{"secrets":[],"type":"","windows_config":{"winrm_listeners":[],"time_zone":"","additional_unattend_content":[],"provision_vm_agent":true,"auto_updates":false,"type":""},"linux_config":{"type":"","disable_password_auth":false,"public_keys":[],"custom_data":"#cloud-config\nhostname: @@{name}@@\nusers:\n  - name: @@{Cred_OS.username}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: |\n    @@{Cred_OS.username}@@:@@{Cred_OS.secret}@@\n  expire: False\nssh_pwauth: True\nruncmd:\n  - yum -y install lvm2\n  - [eject]"}},"rg_details":{},"hw_profile":{"max_data_disk_count":2,"vm_size":"Standard_B1s","type":""},"location":"uksouth","rg_operation":"","availability_set_id":"","tag_list":[],"type":"","account_uuid":"1739d129-eecf-0bd6-1332-64f8e104ef93"}},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"ApacheAHV","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"Cred_OS"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{}}}},"os_type":"Linux","create_spec":{"name":"demo-ahv-@@{calm_array_index}@@-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"92b02b9e-b316-4503-94fb-a90bf3fede8b"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":1024,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nhostname: @@{name}@@\nusers:\n  - name: @@{Cred_OS.username}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\nchpasswd:\n  list: |\n    @@{Cred_OS.username}@@:@@{Cred_OS.secret}@@\n  expire: False\nssh_pwauth: True\nruncmd:\n  - yum -y install lvm2\n  - [eject]"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"4ad90864-dcc6-47d1-9dfb-9feede5927a5","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS_7_Cloud","uuid":"d3893b21-a962-439d-879d-2a07daf3b2e4"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"Cred_OS"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"LoadBalancer"}],"name":"Package1","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"11393b54_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"script":"sudo setenforce 0\nsudo sed -i 's\/permissive\/disabled\/' \/etc\/sysconfig\/selinux\n\nsudo yum install haproxy -y","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"dced2142_runbook","main_task_local_reference":{"kind":"app_task","name":"11393b54_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"00f41e10_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"3bfa9719_runbook","main_task_local_reference":{"kind":"app_task","name":"00f41e10_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Apache_AZ"}],"name":"Package2","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package2"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"ccb2d2de_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Apache_AZ"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"script":"sudo yum install -y httpd php wget","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"2a25b240_runbook","main_task_local_reference":{"kind":"app_task","name":"ccb2d2de_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package2"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"fc1fba43_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b61def2f_runbook","main_task_local_reference":{"kind":"app_task","name":"fc1fba43_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Apache_AHV"}],"name":"Package3","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package3"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"70b6a291_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Apache_AHV"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"script":"sudo yum install -y httpd php wget","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"1d08642e_runbook","main_task_local_reference":{"kind":"app_task","name":"70b6a291_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package3"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"5fa251af_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"90614344_runbook","main_task_local_reference":{"kind":"app_task","name":"5fa251af_dag"},"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"652921f9_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package1"}],"substrate_local_reference":{"kind":"app_substrate","name":"LB_AHV"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"169a62c7_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"editables":{"max_replicas":true},"published_service_local_reference_list":[],"max_replicas":"10","package_local_reference_list":[{"kind":"app_package","name":"Package2"}],"substrate_local_reference":{"kind":"app_substrate","name":"ApacheAZURE"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"fbe5e5f3_deployment","min_replicas":"2","default_replicas":"2","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"10","package_local_reference_list":[{"kind":"app_package","name":"Package3"}],"substrate_local_reference":{"kind":"app_substrate","name":"ApacheAHV"},"variable_list":[],"description":""}],"description":"","action_list":[{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"},{"kind":"app_task","name":"Create"},{"kind":"app_task","name":"Start"}],"name":"c48ef281_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Start"}},{"from_task_reference":{"kind":"app_task","name":"Task1"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Create"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"169a62c7_deployment"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Task1","attrs":{"scaling_count":"@@{ADD_INSTANCE}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","type":"SCALING","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Create","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"e1fa7669_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LoadBalancer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Start","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"ecdb71e8_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"60649a61_runbook","main_task_local_reference":{"kind":"app_task","name":"c48ef281_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":true,"description":"","data_type":"BASE","type":"LOCAL","name":"ADD_INSTANCE","value":"1","label":"Additional instances to add","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},"name":"Burst"}],"name":"Default","variable_list":[]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"Cred_OS"},"type":"USER"},"name":"jg-multi-cloud-bursting"},"api_version":"3.0","metadata":{"last_update_time":"1607417550633855","kind":"blueprint","spec_version":38,"creation_time":"1606854604493837","name":"jg-multi-cloud-bursting"}}